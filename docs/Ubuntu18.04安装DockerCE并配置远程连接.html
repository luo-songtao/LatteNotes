<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="generator" content="Jekyll">

  <title>Ubuntu18.04安装DockerCE并配置远程连接</title>
  <link rel="stylesheet" href="/notes/css/main.css">

  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="ATOM Feed" /> <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Ubuntu18.04安装DockerCE并配置远程连接 | LuoSongtao-Blog</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Ubuntu18.04安装DockerCE并配置远程连接" />
<meta name="author" content="LuoSongtao" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Ubuntu18.04安装Docker" />
<meta property="og:description" content="Ubuntu18.04安装Docker" />
<link rel="canonical" href="http://0.0.0.0:4000/notes/Ubuntu18.04%E5%AE%89%E8%A3%85DockerCE%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5" />
<meta property="og:url" content="http://0.0.0.0:4000/notes/Ubuntu18.04%E5%AE%89%E8%A3%85DockerCE%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5" />
<meta property="og:site_name" content="LuoSongtao-Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-02T04:00:00-05:00" />
<script type="application/ld+json">
{"datePublished":"2018-07-02T04:00:00-05:00","dateModified":"2018-07-02T04:00:00-05:00","author":{"@type":"Person","name":"LuoSongtao"},"description":"Ubuntu18.04安装Docker","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/notes/Ubuntu18.04%E5%AE%89%E8%A3%85DockerCE%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5"},"@type":"BlogPosting","url":"http://0.0.0.0:4000/notes/Ubuntu18.04%E5%AE%89%E8%A3%85DockerCE%E5%B9%B6%E9%85%8D%E7%BD%AE%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5","headline":"Ubuntu18.04安装DockerCE并配置远程连接","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>
  <div id="wrapper">
    <header>
  <div style="text-align: center;">
    <div>
      <a id="username" href="/notes/">
      
      <span style="font-size: x-large;color: #b5e853">luosongtao@home:~$</span>
      </a>
      
<div id="search">
	<input type="text" id="search-input" placeholder="Command.." style="vertical-align:middle;">
	<ul id="results-container"></ul>
</div>

<!-- script pointing to jekyll-search.js -->
<script src="/notes/assets/js/simple-jekyll-search.min.js"></script>
<script async src="/notes/searchdata.js"></script>

    </div>
  </div>
  <div class="header-links">
      <a href="/notes/archive"><h2 class="header-link">Archive</h2></a>
<a href="/notes/about"><h2 class="header-link">About</h2></a>
<a href="/notes/atom.xml"><h2 class="header-link">RSS</h2></a>
  </div>

</header>
    <div class="container">
        <article>
  <h2>Ubuntu18.04安装DockerCE并配置远程连接</h2>
  <time datetime="2018-07-02T04:00:00-05:00" class="by-line">02 Jul 2018</time>
  <h3 id="ubuntu1804安装docker">Ubuntu18.04安装Docker</h3>

<p>Ubuntu上安装Docker CE的步骤和官网几乎一样，只是这里采用的是阿里的软件源，加速器也是使用阿里提供的加速器(免费)。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># step 1: 安装必要的一些系统工具</span>
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>apt-transport-https ca-certificates curl software-properties-common
<span class="c"># step 2: 安装GPG证书</span>
curl <span class="nt">-fsSL</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | <span class="nb">sudo </span>apt-key add -
<span class="c"># Step 3: 写入软件源信息</span>
<span class="nb">sudo </span>add-apt-repository <span class="s2">"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu </span><span class="k">$(</span>lsb_release <span class="nt">-cs</span><span class="k">)</span><span class="s2"> stable"</span>
<span class="c"># Step 4: 更新并安装Docker-CE</span>
<span class="nb">sudo </span>apt-get <span class="nt">-y</span> update
<span class="nb">sudo </span>apt-get <span class="nt">-y</span> <span class="nb">install </span>docker-ce

<span class="c"># 安装指定版本的Docker-CE:</span>
<span class="c"># Step 1: 查找Docker-CE的版本:</span>
<span class="c"># apt-cache madison docker-ce</span>
<span class="c">#   docker-ce | 17.03.1~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages</span>
<span class="c">#   docker-ce | 17.03.0~ce-0~ubuntu-xenial | http://mirrors.aliyun.com/docker-ce/linux/ubuntu xenial/stable amd64 Packages</span>
<span class="c"># Step 2: 安装指定版本的Docker-CE: (VERSION例如上面的17.03.1~ce-0~ubuntu-xenial)</span>
<span class="c"># sudo apt-get -y install docker-ce=[VERSION]</span>

<span class="c"># 启动docker</span>
<span class="nb">sudo </span>service docker start
<span class="c"># 查看docker</span>
<span class="nb">sudo </span>docker version
</code></pre></div></div>
<p>镜像加速器配置，参考：<a href="https://yq.aliyun.com/articles/29941">阿里云提供的加速器配置</a>，登录<a href="https://cr.console.aliyun.com/">容器Hub服务</a>进行获取并在<code class="highlighter-rouge">/etc/docker/daemon.json</code>中配置</p>

<h3 id="ubuntu1804中配置docker远程连接">Ubuntu18.04中配置Docker远程连接</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Step 1: 添加远程连接配置</span>
<span class="nb">sudo </span>vi /etc/default/docker
<span class="c"># 修改DOCKER_OPTS</span>
<span class="c"># 注意：端口可以随意改，通常使用2375；远程连接使用的tcp协议，因此操作系统还需要打开2375端口</span>
<span class="nv">DOCKER_OPTS</span><span class="o">=</span><span class="s1">'-H 0.0.0.0:2375 -H unix:///var/run/docker.sock'</span>

<span class="c"># Step 2: 修改docker的service启动配置</span>
<span class="nb">sudo </span>vi /lib/systemd/system/docker.service
<span class="c"># 将‘ExecStart=/usr/bin/dockerd -H fd:// ’ 改为</span>
<span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/dockerd <span class="nt">-H</span> fd:// <span class="nv">$DOCKER_OPTS</span>
<span class="c"># 并同时在该行下面添加下句话</span>
<span class="nv">EnvironmentFile</span><span class="o">=</span>/etc/default/docker

<span class="c"># Step 3: 重载service服务配置（因为刚刚我们改动了）</span>
<span class="nb">sudo </span>systemctl daemon-reload

<span class="c"># Step 4: 重启docker</span>
<span class="nb">sudo </span>systemctl restart docker

<span class="c"># 检验配置是否成功</span>
<span class="nb">sudo </span>docker <span class="nt">-H</span> <span class="s2">"127.0.0.1:2375"</span> images
</code></pre></div></div>
<p>注意：Ubuntu18.04的远程连接配置和CentOS7的有所不同，CentOS7是在daemon.json中配置</p>

</article>
      <section id="main_content">
        <ul>
            
        </ul>
      </section>
    </div>
  </div>
   <footer>
  <a href="/notes/">
    <span>
        <b>LuoSongtao</b>
    </span>
    
    <span>© 2019</span>
  </a>
</footer>

  
</body>

</html>